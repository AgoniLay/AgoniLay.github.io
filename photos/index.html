<!--
<style type="text/css">
  .box {
    visibility: visible;
    overflow: auto;
    zoom: 1;
  }
  .waterfall {
    width: 100%;
    column-count: 4;
    column-width: 20%;
    column-gap: 0;
  }
  .imgbox {
    margin-bottom: 2px;
    padding: 1px 10px;
    break-inside: avoid;
  }
  img.imgitem {
    width: 100%;
    vertical-align: middle;
  }
  img:hover {
    opacity: 0.8; /* 透明度 */
    filter: alpha(opacity = 100); /* For IE8 and earlier */
  }

  .box span strong{
    background: rgba(0,0,0,0.4);
    padding: 20px;
  }

  .title {
    margin: 10px auto;
    display: inline-block;
    vertical-align: middle;
    font: 85px/250px 'ChaletComprimeMilanSixty';
    background-position: center center !important;
    color: #fff;
    background-size: 100% auto !important;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    width: 100%;
    text-align: center;
    border: unset;
    height: 240px;
    cursor: unset !important;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  @media (max-width: 767px){
    .box li {
      width: 98%;
    }
    .title {
      height: 200px;
    }
    .box span {
      border-right: unset;
      font-size: 17px;
    }
    .box p{
      border-right: unset;
      font-size: 12px;
    }
  }

</style>

<div id="box" class="box"></div>

<script>
  const cdnPath = 'https://agonilay.github.io/img/'

  function readTextFile (file, callback) {
    var rawFile = new XMLHttpRequest()
    rawFile.overrideMimeType('application/json')
    rawFile.open('GET', file, true)
    rawFile.onreadystatechange = function() {
      if (rawFile.readyState === 4 && rawFile.status == '200') {
        callback(rawFile.responseText)
      }
    }
    rawFile.send(null)
  }

  readTextFile('./output.json', function (text) {
    var data = JSON.parse(text)
    var box = document.getElementById('box')
    for (let key in data) {
      var conBox = document.createElement('div')
      conBox.id = 'conBox' + new Date().getTime()
      box.appendChild(conBox)
      var item = document.createElement('div')
      var title = key
      var url = cdnPath + key + '.jpg'
      item.innerHTML = `
        <button class="title" style="background: url(${ url });">
          <span style="display: inline;"><strong style="color: #f0f3f6;">${ title }</strong></span>
        </button>`
      conBox.appendChild(item)

      const waterfall = document.createElement('div')
      waterfall.setAttribute('class', 'waterfall')
      for (var i = 1; i < data[key].length ; i++) {
        var _url = cdnPath + data[key][i].name
        var item = document.createElement('div')
        item.setAttribute('class', 'imgbox')
        item.setAttribute('id', 'imgbox')
        item.innerHTML=`<img class="imgitem" src="${ _url }">`
        waterfall.appendChild(item)
      }
      conBox.appendChild(waterfall)
    }
    watchWindowSize()
  })

  function watchWindowSize () {
  // 获取窗口的宽度
    var w = document.documentElement.clientWidth
    var waterfalls = document.getElementsByClassName('waterfall')
    let count = w > 1190 ? 4 : w > 982 ? 3 : w > 568 ? 2 : 1
    Array.prototype.forEach.call(waterfalls, item => {
      item.style.columnCount = count
    })
  }
  // 将事件侦听器函数附加到窗口的 resize 事件
  window.addEventListener("resize", watchWindowSize)
</script> -->
